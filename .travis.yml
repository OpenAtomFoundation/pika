sudo: required
dist: trusty
language: cpp

os:
  - linux

env:
  global:
    - PROTOBUF_VERSION=2.5.0
    - PROCESSOR_NUMS=(cat /proc/cpuinfo | grep processor | wc -l)

install:
  - wget https://github.com/protocolbuffers/protobuf/releases/download/v$PROTOBUF_VERSION/protobuf-$PROTOBUF_VERSION.tar.bz2
  - tar xvf protobuf-$PROTOBUF_VERSION.tar.bz2
  - echo $PROCESSOR_NUMS
  - ( cd protobuf-$PROTOBUF_VERSION && ./configure --prefix=/usr && make && sudo make install )

addons:
  apt:
    packages: ['libsnappy-dev', 'libprotobuf-dev', 'libgoogle-glog-dev']

compiler:
  - gcc

language: cpp

script: make -j $PROCESSOR_NUMS
